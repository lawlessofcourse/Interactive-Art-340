(function(c,e){function f(){$("li.highlight",".entries").mouseenter(function(){var g=$(this);g.find(".entry_thumb_content").hide().fadeIn(300)});$("li.highlight",".entries").mouseleave(function(){var g=$(this);g.find(".entry_thumb_content").hide().fadeIn(300)});$("li.default",".entries").mouseenter(function(){var g=$(this);g.find(".over").fadeIn(200)});$("li.default",".entries").mouseleave(function(){var g=$(this);g.find(".over").fadeOut(300)})}var d=(function(){var g="http://s7.addthis.com/js/250/addthis_widget.js#async=1&pubid=ra-4fbe9475192057ea";return function(){if(c.addthis){c.addthis=null}$.getScript(g,function(){addthis.init()})}}());var b=c.History;$=c.jQuery;var a=c.document;if(!b.enabled){d();return false}b.Adapter.bind(c,"statechage",function(){var g=b.getState();b.log(g.data,g.title,g.url)});$(function(){var l=".content",k=$(l),h=$("#menu"),v="> ul > li",s="active",m=".active",o=$(a.body),w=c.ModalBox,j=new w(),r=b.getRootUrl(),i=$("body,html,document"),u=a.location.href,n=a.location.href;if(k.length===0){k=o}$.expr[":"].internal=function(D,z,C,x){var B=$(D),y=B.attr("href")||"",A;A=y.substring(0,r.length)===r||y.indexOf(":")===-1;return A};var q=function(y){var x=String(y).replace(/<\!DOCTYPE[^>]*>/i,"").replace(/<(html|head|body|title|meta|script)([\s\>])/gi,'<div class="document-$1" $2').replace(/<\/(html|head|body|title|meta|script)\>/gi,"</div>");return x};$.fn.ajaxify=function(){var x=$(this);x.find("a:internal:not(.no-ajaxy)").click(function(A){var C=$(this),y=C.attr("href"),z=C.attr("data-target"),D=((C.parents("nav").length)===0?C.offset().top:100);if(A.which==2||A.metaKey){return true}u=a.location.href;var B={target:z,scrollOffset:D};b.pushState(B,null,y);A.preventDefault();return false});f();return x};j.topOffset=-25;j.onClose=function(x){x.style.display="none"};j.onOpen=function(x){$(x).hide()};j.onShow=function(x){$(x).delay(500).fadeIn(500);d()};$.fn.modalize=function(){var C=$(this),z="#fragment",y=a.getElementById("fragment"),B=C.find("a.skip-top-button"),A=C.find("a:internal.back-button"),E=C.find("#modalbox-overlay");var x=function(F){i.stop().animate({scrollTop:$(y).offset().top},1000,"easeInOutExpo");F.preventDefault();return false};B.click(function(F){x(F)});var D=function(H){var F=$(H.target),G=u==r?u:(A.attr("href")||null),I=(A.attr("title")||null);j.close();if(G==null&&I==null){return}b.pushState(null,I,G);H.preventDefault();return};A.click(function(F){D(F)});E.click(function(F){D(F)});if(y&&y.hasChildNodes()){j.open(y)}return C};o.ajaxify().modalize();if(n!=null){var t=$('a[href="'+n+'"]:internal');if(t.length==1){var p=100;var g=$(a).height()-$(c).height();g=g>0?g:p;landingOffset=t.parents("nav").length===0?t.parent().offset().top:p;landingOffset=landingOffset<g?landingOffset:g;i.scrollTop(landingOffset-p);j.setTop(landingOffset)}}$(c).bind("statechange",function(){var y=b.getState(),A=y.url,x=A.replace(r,""),B=y.data.target,z=y.data.scrollOffset!==e?y.data.scrollOffset:0;o.addClass("loading");k=$(B);$.ajax({url:A,success:function(H,D,L){var F=$(q(H)),E=F.find(".document-body:first"),I=E.find(B),K;K=I.html()||F.html();if(!K){a.location.href=A;return false}$menuChildren=h.find(v);$menuChildren.filter(m).removeClass(s);$menuChildren=$menuChildren.has('a[href^="'+x+'"],a[href^="/'+x+'"],a[href^="'+A+'"]');if($menuChildren.length===1){$menuChildren.addClass(s)}k.stop(true,true);i.stop(true,false);if(B==="#fragment"){var J=100;var C=$(a).height()-$(c).height();C=C>0?C:J;z=z<C?z:C;i.animate({scrollTop:z-J},1000,"easeInOutExpo",function(){j.setTop(z);k.html(K).ajaxify();k.modalize()})}else{if(!j.isClosed()){j.close();j.setTop(0)}k.hide().html(K).ajaxify().fadeIn()}a.title=F.find(".document-title:first").text();try{a.getElementsByTagName("title")[0].innerHTML=a.title.replace("<","&lt;").replace(" & "," &amp; ")}catch(G){}o.removeClass("loading");if(_gaq!==e){_gaq.push(["_trackPageview",x])}},error:function(C,E,D){a.location.href=A;return false}})})})})(window);